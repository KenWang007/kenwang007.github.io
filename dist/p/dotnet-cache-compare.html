<!DOCTYPE html>
<html lang="zh-CN" class="page-article">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - å…³é”®è¯: NET, ç¼“å­˜, ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”">
    <meta name="keywords" content="NET, ç¼“å­˜, ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”">
    <meta name="author" content="Ken Wang">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://kenwang007.github.io/dist/p/dotnet-cache-compare.html">
    <meta property="og:title" content="ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - Kençš„çŸ¥è¯†åº“">
    <meta property="og:description" content="ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - å…³é”®è¯: NET, ç¼“å­˜, ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:url" content="https://kenwang007.github.io/dist/p/dotnet-cache-compare.html">
    <meta property="twitter:title" content="ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - Kençš„çŸ¥è¯†åº“">
    <meta property="twitter:description" content="ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - å…³é”®è¯: NET, ç¼“å­˜, ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#6366f1">
    
    <title>ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - Kençš„çŸ¥è¯†åº“</title>
    <link rel="stylesheet" href="/style.css?v=2.1.2">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%236366f1%22>ğŸ“š</text></svg>">
    <link rel="canonical" href="https://kenwang007.github.io/dist/p/dotnet-cache-compare.html">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="Kençš„çŸ¥è¯†åº“ RSS Feed" href="/rss.xml">
    
    <!-- Breadcrumb Navigation -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "é¦–é¡µ",
          "item": "https://kenwang007.github.io/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”",
          "item": "https://kenwang007.github.io/dist/p/dotnet-cache-compare.html"
        }
      ]
    }
    </script>
    
    <!-- Article Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”",
      "description": "ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯” - å…³é”®è¯: NET, ç¼“å­˜, ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”",
      "author": {
        "@type": "Person",
        "name": "Ken Wang"
      },
      "datePublished": "2026-01-29T20:26:18.620549",
      "dateModified": "2026-01-29T20:26:18.620549",
      "inLanguage": "zh-CN"
    }
    </script>
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars"></div>
    <div class="stars2"></div>
    <div class="stars3"></div>

    <!-- é¡¶éƒ¨å›ºå®šå¯¼èˆª -->
    <header class="top-nav">
        <div class="nav-container">
            <div class="logo">
                <a href="/index.html">
                    <span class="logo-text">ğŸ“š Kençš„çŸ¥è¯†åº“</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul id="nav-menu" class="nav-menu">
                    <!-- åŠ¨æ€ç”Ÿæˆçš„å¯¼èˆªèœå•é¡¹ -->
                </ul>
            </nav>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- å·¦ä¾§å›ºå®šå…³é”®è¯ç´¢å¼• -->
        <aside class="keyword-sidebar">
            <div class="keyword-header">
                <h3>å…³é”®è¯ç´¢å¼•</h3>
            </div>
            <div class="keyword-list" id="keyword-list">
                <!-- åŠ¨æ€ç”Ÿæˆçš„å…³é”®è¯ -->
            </div>
        </aside>

        <!-- ä¸­é—´ä¸»å†…å®¹ -->
        <section class="content-area">
            <div class="content-wrapper">
                <article class="markdown-content">
                    
<h1 id="net-ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”">ğŸ”„ .NET ç¼“å­˜æ¡†æ¶å…¨é¢å¯¹æ¯”</h1>
<h2 id="net-ç¼“å­˜è§£å†³æ–¹æ¡ˆæ¦‚è§ˆ">1. .NET ç¼“å­˜è§£å†³æ–¹æ¡ˆæ¦‚è§ˆ</h2>
<h3 id="ç¼“å­˜æ–¹æ¡ˆåˆ†ç±»">1.1 ç¼“å­˜æ–¹æ¡ˆåˆ†ç±»</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>æ–¹æ¡ˆ</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æœ¬åœ°ç¼“å­˜</strong></td>
<td>IMemoryCacheã€LazyCache</td>
<td>å•æœºåº”ç”¨ã€é«˜é¢‘è®¿é—®</td>
</tr>
<tr>
<td><strong>åˆ†å¸ƒå¼ç¼“å­˜</strong></td>
<td>IDistributedCacheã€Redisã€Memcached</td>
<td>é›†ç¾¤éƒ¨ç½²ã€æ•°æ®å…±äº«</td>
</tr>
<tr>
<td><strong>æ··åˆç¼“å­˜</strong></td>
<td>HybridCacheã€FusionCache</td>
<td>å¤šçº§ç¼“å­˜ã€é«˜å¯ç”¨</td>
</tr>
<tr>
<td><strong>HTTP ç¼“å­˜</strong></td>
<td>ResponseCachingã€OutputCache</td>
<td>API å“åº”ç¼“å­˜</td>
</tr>
<tr>
<td><strong>æ•°æ®è®¿é—®ç¼“å­˜</strong></td>
<td>EF Core äºŒçº§ç¼“å­˜</td>
<td>ORM æŸ¥è¯¢ç»“æœç¼“å­˜</td>
</tr>
</tbody>
</table>
<h3 id="æŠ€æœ¯æ ˆå…¨æ™¯å›¾">1.2 æŠ€æœ¯æ ˆå…¨æ™¯å›¾</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    .NET ç¼“å­˜æŠ€æœ¯æ ˆ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å¾®è½¯å®˜æ–¹                          å¼€æºç¤¾åŒº                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚  â€¢ IMemoryCache                    â€¢ FusionCache            â”‚
â”‚  â€¢ IDistributedCache               â€¢ LazyCache              â”‚
â”‚  â€¢ HybridCache (.NET 9)            â€¢ CacheManager           â”‚
â”‚  â€¢ ResponseCaching                 â€¢ EasyCaching            â”‚
â”‚  â€¢ OutputCache (.NET 7+)           â€¢ Cashew                 â”‚
â”‚                                    â€¢ Akavache               â”‚
â”‚                                                             â”‚
â”‚  åˆ†å¸ƒå¼ç¼“å­˜åç«¯                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚  â€¢ Redis (StackExchange.Redis)                              â”‚
â”‚  â€¢ SQL Server                                               â”‚
â”‚  â€¢ NCache                                                   â”‚
â”‚  â€¢ Memcached                                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
<hr />
<h2 id="å¾®è½¯å®˜æ–¹ç¼“å­˜æ¡†æ¶">2. å¾®è½¯å®˜æ–¹ç¼“å­˜æ¡†æ¶</h2>
<h3 id="imemorycacheæœ¬åœ°ç¼“å­˜">2.1 IMemoryCacheï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰</h3>
<p><strong>åŒ…</strong>:
<code>Microsoft.Extensions.Caching.Memory</code></p>
<pre><code class="language-csharp">// æ³¨å†Œ
builder.Services.AddMemoryCache();

// ä½¿ç”¨
public class ProductService
{
    private readonly IMemoryCache _cache;
    
    public Product? GetProduct(int id)
    {
        return _cache.GetOrCreate($&quot;product:{id}&quot;, entry =&gt;
        {
            entry.AbsoluteExpirationRelativeToNow = TimeSpan.FromHours(1);
            entry.SlidingExpiration = TimeSpan.FromMinutes(10);
            entry.Priority = CacheItemPriority.High;
            
            return _repository.GetById(id);
        });
    }
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å­˜å‚¨ä½ç½®</strong></td>
<td>è¿›ç¨‹å†…å­˜</td>
</tr>
<tr>
<td><strong>è¿‡æœŸç­–ç•¥</strong></td>
<td>ç»å¯¹è¿‡æœŸã€æ»‘åŠ¨è¿‡æœŸ</td>
</tr>
<tr>
<td><strong>æ·˜æ±°ç­–ç•¥</strong></td>
<td>LRU + Priority</td>
</tr>
<tr>
<td><strong>å¤§å°é™åˆ¶</strong></td>
<td>å¯é…ç½® SizeLimit</td>
</tr>
<tr>
<td><strong>çº¿ç¨‹å®‰å…¨</strong></td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>åºåˆ—åŒ–</strong></td>
<td>ä¸éœ€è¦</td>
</tr>
</tbody>
</table>
<p><strong>é™åˆ¶</strong>ï¼š - âŒ ä¸æ”¯æŒåˆ†å¸ƒå¼ - âŒ åº”ç”¨é‡å¯æ•°æ®ä¸¢å¤± - âŒ
å¤šå®ä¾‹æ•°æ®ä¸åŒæ­¥</p>
<h3 id="idistributedcacheåˆ†å¸ƒå¼ç¼“å­˜æŠ½è±¡">2.2
IDistributedCacheï¼ˆåˆ†å¸ƒå¼ç¼“å­˜æŠ½è±¡ï¼‰</h3>
<p><strong>åŒ…</strong>:
<code>Microsoft.Extensions.Caching.Distributed</code></p>
<pre><code class="language-csharp">// Redis å®ç°
builder.Services.AddStackExchangeRedisCache(options =&gt;
{
    options.Configuration = &quot;localhost:6379&quot;;
    options.InstanceName = &quot;MyApp:&quot;;
});

// SQL Server å®ç°
builder.Services.AddDistributedSqlServerCache(options =&gt;
{
    options.ConnectionString = connectionString;
    options.SchemaName = &quot;dbo&quot;;
    options.TableName = &quot;CacheTable&quot;;
});

// ä½¿ç”¨
public class ProductService
{
    private readonly IDistributedCache _cache;
    
    public async Task&lt;Product?&gt; GetProductAsync(int id)
    {
        var key = $&quot;product:{id}&quot;;
        var cached = await _cache.GetStringAsync(key);
        
        if (cached != null)
            return JsonSerializer.Deserialize&lt;Product&gt;(cached);
        
        var product = await _repository.GetByIdAsync(id);
        if (product != null)
        {
            await _cache.SetStringAsync(key, JsonSerializer.Serialize(product),
                new DistributedCacheEntryOptions
                {
                    AbsoluteExpirationRelativeToNow = TimeSpan.FromHours(1)
                });
        }
        
        return product;
    }
}</pre>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 29%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>å®ç°</th>
<th>åŒ…</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Redis</strong></td>
<td><code>Microsoft.Extensions.Caching.StackExchangeRedis</code></td>
<td>æœ€å¸¸ç”¨ï¼Œæ€§èƒ½å¥½</td>
</tr>
<tr>
<td><strong>SQL Server</strong></td>
<td><code>Microsoft.Extensions.Caching.SqlServer</code></td>
<td>åˆ©ç”¨ç°æœ‰æ•°æ®åº“</td>
</tr>
<tr>
<td><strong>Memory</strong></td>
<td><code>Microsoft.Extensions.Caching.Memory</code></td>
<td>æµ‹è¯•/å¼€å‘ç”¨</td>
</tr>
<tr>
<td><strong>NCache</strong></td>
<td><code>NCache.Microsoft.Extensions.Caching</code></td>
<td>ä¼ä¸šçº§æ–¹æ¡ˆ</td>
</tr>
</tbody>
</table>
<p><strong>é™åˆ¶</strong>ï¼š - âŒ API è¿‡äºç®€å•ï¼Œåªæ”¯æŒ byte[] - âŒ
ä¸æ”¯æŒé˜²å‡»ç©¿ - âŒ ä¸æ”¯æŒå¤šçº§ç¼“å­˜ - âŒ éœ€è¦æ‰‹åŠ¨åºåˆ—åŒ–</p>
<h3 id="hybridcache.net-9-æ–°å¢">2.3 HybridCacheï¼ˆ.NET 9 æ–°å¢ï¼‰</h3>
<p><strong>åŒ…</strong>:
<code>Microsoft.Extensions.Caching.Hybrid</code></p>
<pre><code class="language-csharp">// æ³¨å†Œ
builder.Services.AddHybridCache(options =&gt;
{
    options.DefaultEntryOptions = new HybridCacheEntryOptions
    {
        Expiration = TimeSpan.FromHours(1),
        LocalCacheExpiration = TimeSpan.FromMinutes(5)
    };
});

// é…ç½® Redis ä½œä¸º L2 ç¼“å­˜
builder.Services.AddStackExchangeRedisCache(options =&gt;
{
    options.Configuration = &quot;localhost:6379&quot;;
});

// ä½¿ç”¨
public class ProductService
{
    private readonly HybridCache _cache;
    
    public async Task&lt;Product&gt; GetProductAsync(int id)
    {
        return await _cache.GetOrCreateAsync(
            $&quot;product:{id}&quot;,
            async cancel =&gt; await _repository.GetByIdAsync(id, cancel)
        );
    }
    
    // å¸¦æ ‡ç­¾ï¼Œæ”¯æŒæ‰¹é‡å¤±æ•ˆ
    public async Task&lt;Product&gt; GetProductWithTagsAsync(int id)
    {
        return await _cache.GetOrCreateAsync(
            $&quot;product:{id}&quot;,
            async cancel =&gt; await _repository.GetByIdAsync(id, cancel),
            new HybridCacheEntryOptions { Expiration = TimeSpan.FromHours(1) },
            tags: [&quot;products&quot;, $&quot;category:{categoryId}&quot;]
        );
    }
    
    // æŒ‰æ ‡ç­¾æ‰¹é‡å¤±æ•ˆ
    public async Task InvalidateCategoryAsync(int categoryId)
    {
        await _cache.RemoveByTagAsync($&quot;category:{categoryId}&quot;);
    }
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td>è‡ªåŠ¨ L1(Memory) + L2(Redis)</td>
</tr>
<tr>
<td><strong>é˜²å‡»ç©¿</strong></td>
<td>å†…ç½® Stampede Protection</td>
</tr>
<tr>
<td><strong>åºåˆ—åŒ–</strong></td>
<td>è‡ªåŠ¨å¤„ç†</td>
</tr>
<tr>
<td><strong>æ ‡ç­¾å¤±æ•ˆ</strong></td>
<td>æ”¯æŒæŒ‰æ ‡ç­¾æ‰¹é‡åˆ é™¤</td>
</tr>
<tr>
<td><strong>ç±»å‹å®‰å…¨</strong></td>
<td>æ³›å‹ API</td>
</tr>
</tbody>
</table>
<p><strong>é™åˆ¶</strong>ï¼š - âŒ ä»… .NET 9+ æ”¯æŒ - âŒ ç›¸å¯¹è¾ƒæ–°ï¼Œç”Ÿæ€ä¸å¦‚
FusionCache</p>
<h3 id="outputcache.net-7">2.4 OutputCacheï¼ˆ.NET 7+ï¼‰</h3>
<p><strong>åŒ…</strong>:
<code>Microsoft.AspNetCore.OutputCaching</code></p>
<pre><code class="language-csharp">// æ³¨å†Œ
builder.Services.AddOutputCache(options =&gt;
{
    options.AddBasePolicy(builder =&gt; builder.Expire(TimeSpan.FromMinutes(10)));
    
    options.AddPolicy(&quot;Products&quot;, builder =&gt; builder
        .Expire(TimeSpan.FromHours(1))
        .Tag(&quot;products&quot;));
});

// ä½¿ç”¨ Redis åç«¯
builder.Services.AddStackExchangeRedisOutputCache(options =&gt;
{
    options.Configuration = &quot;localhost:6379&quot;;
});

app.UseOutputCache();

// æ§åˆ¶å™¨ä¸­ä½¿ç”¨
[OutputCache(PolicyName = &quot;Products&quot;)]
[HttpGet(&quot;{id}&quot;)]
public async Task&lt;Product&gt; GetProduct(int id)
{
    return await _service.GetProductAsync(id);
}

// æ‰‹åŠ¨å¤±æ•ˆ
public async Task UpdateProduct(Product product)
{
    await _repository.UpdateAsync(product);
    await _outputCache.EvictByTagAsync(&quot;products&quot;, default);
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç¼“å­˜å±‚çº§</strong></td>
<td>HTTP å“åº”çº§åˆ«</td>
</tr>
<tr>
<td><strong>å­˜å‚¨</strong></td>
<td>å†…å­˜/Redis</td>
</tr>
<tr>
<td><strong>å¤±æ•ˆæœºåˆ¶</strong></td>
<td>æ ‡ç­¾ã€VaryBy</td>
</tr>
<tr>
<td><strong>è‡ªå®šä¹‰ç­–ç•¥</strong></td>
<td>çµæ´»é…ç½®</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="å¼€æºç¼“å­˜æ¡†æ¶">3. å¼€æºç¼“å­˜æ¡†æ¶</h2>
<h3 id="fusioncache-æ¨è">3.1 FusionCacheï¼ˆâ­ æ¨èï¼‰</h3>
<p><strong>åŒ…</strong>: <code>ZiggyCreatures.FusionCache</code></p>
<pre><code class="language-csharp">// æ³¨å†Œ
builder.Services.AddFusionCache()
    .WithDefaultEntryOptions(new FusionCacheEntryOptions
    {
        Duration = TimeSpan.FromHours(1),
        
        // é˜²å‡»ç©¿ï¼šæ•…éšœå®‰å…¨
        IsFailSafeEnabled = true,
        FailSafeMaxDuration = TimeSpan.FromDays(1),
        FailSafeThrottleDuration = TimeSpan.FromSeconds(30),
        
        // é˜²å‡»ç©¿ï¼šå·¥å‚è¶…æ—¶
        FactorySoftTimeout = TimeSpan.FromMilliseconds(100),
        FactoryHardTimeout = TimeSpan.FromSeconds(2),
        
        // é˜²é›ªå´©ï¼šéšæœºæŠ–åŠ¨
        JitterMaxDuration = TimeSpan.FromMinutes(2),
        
        // åå°åˆ·æ–°
        AllowBackgroundDistributedCacheOperations = true,
        AllowBackgroundBackplaneOperations = true
    })
    // L2: Redis
    .WithDistributedCache(new RedisCache(new RedisCacheOptions
    {
        Configuration = &quot;localhost:6379&quot;
    }))
    // åºåˆ—åŒ–
    .WithSerializer(new FusionCacheSystemTextJsonSerializer())
    // èƒŒæ¿ï¼ˆå¤šå®ä¾‹åŒæ­¥ï¼‰
    .WithBackplane(new RedisBackplane(new RedisBackplaneOptions
    {
        Configuration = &quot;localhost:6379&quot;
    }));

// ä½¿ç”¨
public class ProductService
{
    private readonly IFusionCache _cache;
    
    public async Task&lt;Product?&gt; GetProductAsync(int id)
    {
        return await _cache.GetOrSetAsync(
            $&quot;product:{id}&quot;,
            async ct =&gt; await _repository.GetByIdAsync(id, ct),
            new FusionCacheEntryOptions
            {
                Duration = TimeSpan.FromHours(1),
                FailSafeMaxDuration = TimeSpan.FromDays(1)
            }
        );
    }
    
    // Adaptive Cachingï¼šæ ¹æ®æ•°æ®åŠ¨æ€è°ƒæ•´ç¼“å­˜ç­–ç•¥
    public async Task&lt;Product?&gt; GetProductAdaptiveAsync(int id)
    {
        return await _cache.GetOrSetAsync(
            $&quot;product:{id}&quot;,
            async (ctx, ct) =&gt;
            {
                var product = await _repository.GetByIdAsync(id, ct);
                
                // æ ¹æ®æ•°æ®ç‰¹å¾åŠ¨æ€è°ƒæ•´ç¼“å­˜æ—¶é—´
                if (product?.IsHotSale == true)
                    ctx.Options.Duration = TimeSpan.FromMinutes(5);  // çƒ­é”€å“çŸ­ç¼“å­˜
                else
                    ctx.Options.Duration = TimeSpan.FromHours(2);    // æ™®é€šå“é•¿ç¼“å­˜
                
                return product;
            }
        );
    }
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td>âœ… L1 + L2</td>
</tr>
<tr>
<td><strong>é˜²å‡»ç©¿</strong></td>
<td>âœ… å†…ç½®é” + æ•…éšœå®‰å…¨</td>
</tr>
<tr>
<td><strong>é˜²é›ªå´©</strong></td>
<td>âœ… Jitter</td>
</tr>
<tr>
<td><strong>èƒŒæ¿åŒæ­¥</strong></td>
<td>âœ… Redis/Memory</td>
</tr>
<tr>
<td><strong>Eager Refresh</strong></td>
<td>âœ… æå‰åˆ·æ–°</td>
</tr>
<tr>
<td><strong>Adaptive Caching</strong></td>
<td>âœ… åŠ¨æ€ç­–ç•¥</td>
</tr>
<tr>
<td><strong>OpenTelemetry</strong></td>
<td>âœ… å¯è§‚æµ‹æ€§</td>
</tr>
<tr>
<td><strong>æœ€ä½ç‰ˆæœ¬</strong></td>
<td>.NET Standard 2.0</td>
</tr>
</tbody>
</table>
<h3 id="lazycache">3.2 LazyCache</h3>
<p><strong>åŒ…</strong>: <code>LazyCache</code></p>
<pre><code class="language-csharp">// æ³¨å†Œ
builder.Services.AddLazyCache();

// ä½¿ç”¨
public class ProductService
{
    private readonly IAppCache _cache;
    
    public async Task&lt;Product?&gt; GetProductAsync(int id)
    {
        return await _cache.GetOrAddAsync(
            $&quot;product:{id}&quot;,
            async entry =&gt;
            {
                entry.AbsoluteExpirationRelativeToNow = TimeSpan.FromHours(1);
                return await _repository.GetByIdAsync(id);
            }
        );
    }
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td>âŒ ä»…æœ¬åœ°</td>
</tr>
<tr>
<td><strong>é˜²å‡»ç©¿</strong></td>
<td>âœ… å†…ç½®é”</td>
</tr>
<tr>
<td><strong>API ç®€æ´åº¦</strong></td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td><strong>å­¦ä¹ æ›²çº¿</strong></td>
<td>ä½</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>ç®€å•æœ¬åœ°ç¼“å­˜</td>
</tr>
</tbody>
</table>
<h3 id="easycaching">3.3 EasyCaching</h3>
<p><strong>åŒ…</strong>: <code>EasyCaching.Core</code></p>
<pre><code class="language-csharp">// æ³¨å†Œå¤šçº§ç¼“å­˜
builder.Services.AddEasyCaching(options =&gt;
{
    // L1: å†…å­˜
    options.UseInMemory(&quot;m1&quot;);
    
    // L2: Redis
    options.UseRedis(config =&gt;
    {
        config.DBConfig.Endpoints.Add(new ServerEndPoint(&quot;localhost&quot;, 6379));
    }, &quot;r1&quot;);
    
    // æ··åˆç¼“å­˜
    options.UseHybrid(config =&gt;
    {
        config.TopicName = &quot;cache-sync&quot;;
        config.LocalCacheProviderName = &quot;m1&quot;;
        config.DistributedCacheProviderName = &quot;r1&quot;;
    });
    
    // Redis æ€»çº¿ï¼ˆå¤šå®ä¾‹åŒæ­¥ï¼‰
    options.WithRedisBus(config =&gt;
    {
        config.Endpoints.Add(new ServerEndPoint(&quot;localhost&quot;, 6379));
    });
});

// ä½¿ç”¨
public class ProductService
{
    private readonly IHybridCachingProvider _cache;
    
    public async Task&lt;Product?&gt; GetProductAsync(int id)
    {
        var result = await _cache.GetAsync&lt;Product&gt;($&quot;product:{id}&quot;);
        
        if (result.HasValue)
            return result.Value;
        
        var product = await _repository.GetByIdAsync(id);
        if (product != null)
        {
            await _cache.SetAsync($&quot;product:{id}&quot;, product, TimeSpan.FromHours(1));
        }
        
        return product;
    }
}</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td>âœ… Hybrid Provider</td>
</tr>
<tr>
<td><strong>å¤šåç«¯</strong></td>
<td>âœ… Memory/Redis/Memcached/SQLite</td>
</tr>
<tr>
<td><strong>AOP æ‹¦æˆª</strong></td>
<td>âœ… æ³¨è§£å¼ç¼“å­˜</td>
</tr>
<tr>
<td><strong>åºåˆ—åŒ–</strong></td>
<td>âœ… å¤šç§å¯é€‰</td>
</tr>
<tr>
<td><strong>å“åº”ç¼“å­˜</strong></td>
<td>âœ… æ”¯æŒ</td>
</tr>
</tbody>
</table>
<h3 id="cachemanager">3.4 CacheManager</h3>
<p><strong>åŒ…</strong>: <code>CacheManager.Core</code></p>
<pre><code class="language-csharp">// é…ç½®
var cache = CacheFactory.Build&lt;Product&gt;(settings =&gt;
{
    settings
        .WithSystemRuntimeCacheHandle(&quot;memory&quot;)  // L1
        .And
        .WithRedisConfiguration(&quot;redis&quot;, config =&gt;
        {
            config.WithEndpoint(&quot;localhost&quot;, 6379);
        })
        .WithRedisCacheHandle(&quot;redis&quot;);  // L2
});

// ä½¿ç”¨
var product = cache.GetOrAdd(&quot;product:1&quot;, key =&gt; _repository.GetById(1));

// æ›´æ–°
cache.Put(&quot;product:1&quot;, updatedProduct);

// åˆ é™¤
cache.Remove(&quot;product:1&quot;);</pre>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td>âœ… å¤š Handle é“¾</td>
</tr>
<tr>
<td><strong>åç«¯æ”¯æŒ</strong></td>
<td>âœ… Memory/Redis/Memcached/Couchbase</td>
</tr>
<tr>
<td><strong>äº‹ä»¶ç³»ç»Ÿ</strong></td>
<td>âœ… OnAdd/OnRemove/OnUpdate</td>
</tr>
<tr>
<td><strong>åŒºåŸŸ(Region)</strong></td>
<td>âœ… æ”¯æŒ</td>
</tr>
<tr>
<td><strong>æ´»è·ƒåº¦</strong></td>
<td>âš ï¸ ç»´æŠ¤æ¨¡å¼</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="å¤šç»´åº¦æ¨ªå‘å¯¹æ¯”">4. å¤šç»´åº¦æ¨ªå‘å¯¹æ¯”</h2>
<h3 id="åŠŸèƒ½å¯¹æ¯”">4.1 åŠŸèƒ½å¯¹æ¯”</h3>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 15%" />
<col style="width: 21%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th style="text-align: center;">IMemoryCache</th>
<th style="text-align: center;">IDistributedCache</th>
<th style="text-align: center;">HybridCache</th>
<th style="text-align: center;">FusionCache</th>
<th style="text-align: center;">LazyCache</th>
<th style="text-align: center;">EasyCaching</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æœ¬åœ°ç¼“å­˜</strong></td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr>
<td><strong>åˆ†å¸ƒå¼ç¼“å­˜</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr>
<td><strong>å¤šçº§ç¼“å­˜</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr>
<td><strong>é˜²å‡»ç©¿</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
</tr>
<tr>
<td><strong>é˜²é›ªå´©(Jitter)</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
</tr>
<tr>
<td><strong>æ•…éšœå®‰å…¨</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
</tr>
<tr>
<td><strong>èƒŒæ¿åŒæ­¥</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr>
<td><strong>æ ‡ç­¾å¤±æ•ˆ</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
</tr>
<tr>
<td><strong>è‡ªåŠ¨åºåˆ—åŒ–</strong></td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr>
<td><strong>OpenTelemetry</strong></td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âŒ</td>
</tr>
</tbody>
</table>
<h3 id="æ€§èƒ½å¯¹æ¯”">4.2 æ€§èƒ½å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>æ¡†æ¶</th>
<th style="text-align: center;">è¯»å–æ€§èƒ½</th>
<th style="text-align: center;">å†™å…¥æ€§èƒ½</th>
<th style="text-align: center;">å†…å­˜å ç”¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IMemoryCache</strong></td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">ä½</td>
<td>æœ€å¿«ï¼Œæ— é¢å¤–å¼€é”€</td>
</tr>
<tr>
<td><strong>IDistributedCache</strong></td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">ä½</td>
<td>ç½‘ç»œå¼€é”€</td>
</tr>
<tr>
<td><strong>HybridCache</strong></td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">ä¸­</td>
<td>L1 å‘½ä¸­å¿«</td>
</tr>
<tr>
<td><strong>FusionCache</strong></td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">ä¸­</td>
<td>L1 å‘½ä¸­å¿«</td>
</tr>
<tr>
<td><strong>LazyCache</strong></td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">ä½</td>
<td>å°è£… IMemoryCache</td>
</tr>
<tr>
<td><strong>EasyCaching</strong></td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">ä¸­</td>
<td>åŠŸèƒ½å¤šï¼Œç•¥æ…¢</td>
</tr>
</tbody>
</table>
<h3 id="æ˜“ç”¨æ€§å¯¹æ¯”">4.3 æ˜“ç”¨æ€§å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>æ¡†æ¶</th>
<th style="text-align: center;">API ç®€æ´åº¦</th>
<th style="text-align: center;">å­¦ä¹ æ›²çº¿</th>
<th style="text-align: center;">æ–‡æ¡£è´¨é‡</th>
<th style="text-align: center;">ç¤¾åŒºæ´»è·ƒåº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IMemoryCache</strong></td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">ä½</td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">å®˜æ–¹</td>
</tr>
<tr>
<td><strong>IDistributedCache</strong></td>
<td style="text-align: center;">â­â­</td>
<td style="text-align: center;">ä½</td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">å®˜æ–¹</td>
</tr>
<tr>
<td><strong>HybridCache</strong></td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">ä½</td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">å®˜æ–¹(.NET 9)</td>
</tr>
<tr>
<td><strong>FusionCache</strong></td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">ä¸­</td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­â­</td>
</tr>
<tr>
<td><strong>LazyCache</strong></td>
<td style="text-align: center;">â­â­â­â­â­</td>
<td style="text-align: center;">å¾ˆä½</td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">â­â­â­</td>
</tr>
<tr>
<td><strong>EasyCaching</strong></td>
<td style="text-align: center;">â­â­â­</td>
<td style="text-align: center;">ä¸­</td>
<td style="text-align: center;">â­â­â­â­</td>
<td style="text-align: center;">â­â­â­â­</td>
</tr>
</tbody>
</table>
<h3 id="æ¡†æ¶é™åˆ¶å¯¹æ¯”">4.4 æ¡†æ¶é™åˆ¶å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>æ¡†æ¶</th>
<th>ä¸»è¦é™åˆ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IMemoryCache</strong></td>
<td>ä¸æ”¯æŒåˆ†å¸ƒå¼ï¼›æ— é˜²å‡»ç©¿ï¼›åº”ç”¨é‡å¯ä¸¢å¤±</td>
</tr>
<tr>
<td><strong>IDistributedCache</strong></td>
<td>API è¿‡äºç®€å•ï¼›éœ€æ‰‹åŠ¨åºåˆ—åŒ–ï¼›æ— é˜²å‡»ç©¿</td>
</tr>
<tr>
<td><strong>HybridCache</strong></td>
<td>ä»… .NET 9+ï¼›è¾ƒæ–°ï¼Œç”Ÿæ€å¾…å®Œå–„</td>
</tr>
<tr>
<td><strong>FusionCache</strong></td>
<td>é…ç½®é¡¹å¤šï¼Œéœ€è¦ç†è§£å„å‚æ•°å«ä¹‰</td>
</tr>
<tr>
<td><strong>LazyCache</strong></td>
<td>ä»…æœ¬åœ°ç¼“å­˜ï¼›åŠŸèƒ½ç›¸å¯¹ç®€å•</td>
</tr>
<tr>
<td><strong>EasyCaching</strong></td>
<td>é…ç½®å¤æ‚ï¼›éƒ¨åˆ†åŠŸèƒ½éœ€è¦å¤šä¸ªåŒ…</td>
</tr>
<tr>
<td><strong>CacheManager</strong></td>
<td>å·²è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼Œä¸æ¨èæ–°é¡¹ç›®ä½¿ç”¨</td>
</tr>
</tbody>
</table>
<h3 id="é€‚ç”¨åœºæ™¯">4.5 é€‚ç”¨åœºæ™¯</h3>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>æ¨èæ–¹æ¡ˆ</th>
<th>ç†ç”±</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç®€å•æœ¬åœ°ç¼“å­˜</strong></td>
<td>IMemoryCache / LazyCache</td>
<td>è½»é‡ã€å®˜æ–¹æ”¯æŒ</td>
</tr>
<tr>
<td><strong>çº¯åˆ†å¸ƒå¼ç¼“å­˜</strong></td>
<td>IDistributedCache + Redis</td>
<td>æ ‡å‡†æ¥å£ã€æ˜“æ›¿æ¢</td>
</tr>
<tr>
<td><strong>ç”Ÿäº§çº§å¤šçº§ç¼“å­˜</strong></td>
<td>FusionCache</td>
<td>åŠŸèƒ½å®Œå–„ã€ä¹…ç»éªŒè¯</td>
</tr>
<tr>
<td><strong>.NET 9+ æ–°é¡¹ç›®</strong></td>
<td>HybridCache</td>
<td>å®˜æ–¹æ”¯æŒã€æ ‡ç­¾å¤±æ•ˆ</td>
</tr>
<tr>
<td><strong>éœ€è¦ AOP ç¼“å­˜</strong></td>
<td>EasyCaching</td>
<td>æ³¨è§£å¼ç¼“å­˜ã€æ‹¦æˆªå™¨</td>
</tr>
<tr>
<td><strong>å•ä½“åº”ç”¨å¿«é€Ÿå¼€å‘</strong></td>
<td>LazyCache</td>
<td>æç®€ API</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="é€‰å‹å†³ç­–æŒ‡å—">5. é€‰å‹å†³ç­–æŒ‡å—</h2>
<h3 id="å†³ç­–æ ‘">5.1 å†³ç­–æ ‘</h3>
<pre><code>ä½ çš„éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ
â”‚
â”œâ”€â”€ ä»…éœ€æœ¬åœ°ç¼“å­˜ï¼Ÿ
â”‚   â”œâ”€â”€ éœ€è¦æç®€ APIï¼Ÿ â†’ LazyCache
â”‚   â””â”€â”€ æ ‡å‡†å®˜æ–¹æ–¹æ¡ˆï¼Ÿ â†’ IMemoryCache
â”‚
â”œâ”€â”€ éœ€è¦åˆ†å¸ƒå¼ç¼“å­˜ï¼Ÿ
â”‚   â”œâ”€â”€ ä»…åˆ†å¸ƒå¼ï¼Œæ— å¤šçº§ï¼Ÿ â†’ IDistributedCache + Redis
â”‚   â””â”€â”€ éœ€è¦å¤šçº§ç¼“å­˜ï¼Ÿ
â”‚       â”œâ”€â”€ .NET 9+ï¼Ÿ â†’ HybridCache
â”‚       â””â”€â”€ .NET 8 åŠä»¥ä¸‹ï¼Ÿ â†’ FusionCache
â”‚
â”œâ”€â”€ éœ€è¦é«˜å¯ç”¨/é˜²å‡»ç©¿/æ•…éšœå®‰å…¨ï¼Ÿ
â”‚   â””â”€â”€ FusionCacheï¼ˆæœ€å®Œå–„ï¼‰
â”‚
â”œâ”€â”€ éœ€è¦å¤šå®ä¾‹ç¼“å­˜åŒæ­¥ï¼Ÿ
â”‚   â”œâ”€â”€ FusionCache + Backplane
â”‚   â””â”€â”€ EasyCaching + Redis Bus
â”‚
â””â”€â”€ éœ€è¦ AOP æ³¨è§£å¼ç¼“å­˜ï¼Ÿ
    â””â”€â”€ EasyCaching</pre>
<h3 id="ç‰ˆæœ¬å…¼å®¹æ€§">5.2 ç‰ˆæœ¬å…¼å®¹æ€§</h3>
<table>
<thead>
<tr>
<th>æ¡†æ¶</th>
<th>æœ€ä½ .NET ç‰ˆæœ¬</th>
<th>æ¨èç‰ˆæœ¬</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IMemoryCache</strong></td>
<td>.NET Standard 2.0</td>
<td>ä»»æ„</td>
</tr>
<tr>
<td><strong>IDistributedCache</strong></td>
<td>.NET Standard 2.0</td>
<td>ä»»æ„</td>
</tr>
<tr>
<td><strong>HybridCache</strong></td>
<td>.NET 9</td>
<td>.NET 9+</td>
</tr>
<tr>
<td><strong>FusionCache</strong></td>
<td>.NET Standard 2.0</td>
<td>.NET 6+</td>
</tr>
<tr>
<td><strong>LazyCache</strong></td>
<td>.NET Standard 2.0</td>
<td>ä»»æ„</td>
</tr>
<tr>
<td><strong>EasyCaching</strong></td>
<td>.NET Standard 2.0</td>
<td>.NET 6+</td>
</tr>
</tbody>
</table>
<h3 id="nuget-åŒ…æ¸…å•">5.3 NuGet åŒ…æ¸…å•</h3>
<pre><code class="language-xml">&lt;!-- å¾®è½¯å®˜æ–¹ --&gt;
&lt;PackageReference Include=&quot;Microsoft.Extensions.Caching.Memory&quot; Version=&quot;8.0.0&quot; /&gt;
&lt;PackageReference Include=&quot;Microsoft.Extensions.Caching.StackExchangeRedis&quot; Version=&quot;8.0.0&quot; /&gt;
&lt;PackageReference Include=&quot;Microsoft.Extensions.Caching.Hybrid&quot; Version=&quot;9.0.0&quot; /&gt; &lt;!-- .NET 9 --&gt;

&lt;!-- FusionCache --&gt;
&lt;PackageReference Include=&quot;ZiggyCreatures.FusionCache&quot; Version=&quot;1.2.0&quot; /&gt;
&lt;PackageReference Include=&quot;ZiggyCreatures.FusionCache.Serialization.SystemTextJson&quot; Version=&quot;1.2.0&quot; /&gt;
&lt;PackageReference Include=&quot;ZiggyCreatures.FusionCache.Backplane.StackExchangeRedis&quot; Version=&quot;1.2.0&quot; /&gt;

&lt;!-- LazyCache --&gt;
&lt;PackageReference Include=&quot;LazyCache&quot; Version=&quot;2.4.0&quot; /&gt;
&lt;PackageReference Include=&quot;LazyCache.AspNetCore&quot; Version=&quot;2.4.0&quot; /&gt;

&lt;!-- EasyCaching --&gt;
&lt;PackageReference Include=&quot;EasyCaching.Core&quot; Version=&quot;1.9.2&quot; /&gt;
&lt;PackageReference Include=&quot;EasyCaching.InMemory&quot; Version=&quot;1.9.2&quot; /&gt;
&lt;PackageReference Include=&quot;EasyCaching.Redis&quot; Version=&quot;1.9.2&quot; /&gt;
&lt;PackageReference Include=&quot;EasyCaching.HybridCache&quot; Version=&quot;1.9.2&quot; /&gt;</pre>
<hr />
<h2 id="æœ€ä½³å®è·µç¤ºä¾‹">6. æœ€ä½³å®è·µç¤ºä¾‹</h2>
<h3 id="ç”Ÿäº§çº§é…ç½®fusioncache">6.1 ç”Ÿäº§çº§é…ç½®ï¼ˆFusionCacheï¼‰</h3>
<pre><code class="language-csharp">public static class CacheConfiguration
{
    public static IServiceCollection AddProductionCache(
        this IServiceCollection services,
        IConfiguration configuration)
    {
        var redisConnection = configuration.GetConnectionString(&quot;Redis&quot;);
        
        services.AddFusionCache()
            .WithDefaultEntryOptions(new FusionCacheEntryOptions
            {
                // é»˜è®¤ç¼“å­˜æ—¶é—´
                Duration = TimeSpan.FromHours(1),
                
                // æ•…éšœå®‰å…¨ï¼šRedis ä¸å¯ç”¨æ—¶è¿”å›è¿‡æœŸæ•°æ®
                IsFailSafeEnabled = true,
                FailSafeMaxDuration = TimeSpan.FromDays(1),
                FailSafeThrottleDuration = TimeSpan.FromSeconds(30),
                
                // é˜²å‡»ç©¿ï¼šè½¯è¶…æ—¶åè¿”å›æ—§æ•°æ®ï¼Œåå°ç»§ç»­åŠ è½½
                FactorySoftTimeout = TimeSpan.FromMilliseconds(100),
                FactoryHardTimeout = TimeSpan.FromSeconds(2),
                
                // é˜²é›ªå´©ï¼šéšæœºæŠ–åŠ¨
                JitterMaxDuration = TimeSpan.FromMinutes(2),
                
                // åå°æ“ä½œ
                AllowBackgroundDistributedCacheOperations = true,
                AllowBackgroundBackplaneOperations = true
            })
            // L2 ç¼“å­˜
            .WithDistributedCache(
                new RedisCache(new RedisCacheOptions { Configuration = redisConnection }))
            // åºåˆ—åŒ–
            .WithSerializer(new FusionCacheSystemTextJsonSerializer())
            // èƒŒæ¿ï¼šå¤šå®ä¾‹åŒæ­¥
            .WithBackplane(
                new RedisBackplane(new RedisBackplaneOptions { Configuration = redisConnection }))
            // OpenTelemetry
            .WithRegisteredLogger();
        
        return services;
    }
}</pre>
<h3 id="ç”Ÿäº§çº§é…ç½®hybridcache-.net-9">6.2 ç”Ÿäº§çº§é…ç½®ï¼ˆHybridCache .NET
9ï¼‰</h3>
<pre><code class="language-csharp">public static class CacheConfiguration
{
    public static IServiceCollection AddProductionHybridCache(
        this IServiceCollection services,
        IConfiguration configuration)
    {
        // L2: Redis
        services.AddStackExchangeRedisCache(options =&gt;
        {
            options.Configuration = configuration.GetConnectionString(&quot;Redis&quot;);
        });
        
        // HybridCache
        services.AddHybridCache(options =&gt;
        {
            options.DefaultEntryOptions = new HybridCacheEntryOptions
            {
                Expiration = TimeSpan.FromHours(1),
                LocalCacheExpiration = TimeSpan.FromMinutes(5),
                Flags = HybridCacheEntryFlags.DisableUnderlyingData // å¯é€‰ï¼šç¦ç”¨æŸäº›åŠŸèƒ½
            };
            
            options.MaximumKeyLength = 512;
            options.MaximumPayloadBytes = 1024 * 1024; // 1MB
        });
        
        return services;
    }
}</pre>
<h3 id="ç¼“å­˜æœåŠ¡å°è£…">6.3 ç¼“å­˜æœåŠ¡å°è£…</h3>
<pre><code class="language-csharp">public interface ICacheService
{
    Task&lt;T?&gt; GetOrSetAsync&lt;T&gt;(string key, Func&lt;CancellationToken, Task&lt;T?&gt;&gt; factory,
        TimeSpan? duration = null, CancellationToken ct = default);
    Task RemoveAsync(string key, CancellationToken ct = default);
    Task RemoveByPrefixAsync(string prefix, CancellationToken ct = default);
}

public class FusionCacheService : ICacheService
{
    private readonly IFusionCache _cache;
    private readonly ILogger&lt;FusionCacheService&gt; _logger;
    
    public FusionCacheService(IFusionCache cache, ILogger&lt;FusionCacheService&gt; logger)
    {
        _cache = cache;
        _logger = logger;
    }
    
    public async Task&lt;T?&gt; GetOrSetAsync&lt;T&gt;(string key, Func&lt;CancellationToken, Task&lt;T?&gt;&gt; factory,
        TimeSpan? duration = null, CancellationToken ct = default)
    {
        return await _cache.GetOrSetAsync(
            key,
            factory,
            duration.HasValue
                ? new FusionCacheEntryOptions { Duration = duration.Value }
                : null,
            ct
        );
    }
    
    public async Task RemoveAsync(string key, CancellationToken ct = default)
    {
        await _cache.RemoveAsync(key, token: ct);
        _logger.LogDebug(&quot;Cache removed: {Key}&quot;, key);
    }
    
    public async Task RemoveByPrefixAsync(string prefix, CancellationToken ct = default)
    {
        // FusionCache ä¸ç›´æ¥æ”¯æŒå‰ç¼€åˆ é™¤
        // éœ€è¦ç»“åˆ Redis SCAN å‘½ä»¤æˆ–ä½¿ç”¨æ ‡ç­¾
        _logger.LogWarning(&quot;RemoveByPrefix not implemented for FusionCache&quot;);
    }
}</pre>
<hr />
<h2 id="æ€»ç»“">7. æ€»ç»“</h2>
<h3 id="æ¨èæ–¹æ¡ˆ">æ¨èæ–¹æ¡ˆ</h3>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>é¦–é€‰</th>
<th>å¤‡é€‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ–°é¡¹ç›® (.NET 9+)</strong></td>
<td>HybridCache</td>
<td>FusionCache</td>
</tr>
<tr>
<td><strong>ç°æœ‰é¡¹ç›® (.NET 6/7/8)</strong></td>
<td>FusionCache</td>
<td>EasyCaching</td>
</tr>
<tr>
<td><strong>ç®€å•æœ¬åœ°ç¼“å­˜</strong></td>
<td>LazyCache</td>
<td>IMemoryCache</td>
</tr>
<tr>
<td><strong>ä»…åˆ†å¸ƒå¼ç¼“å­˜</strong></td>
<td>IDistributedCache + Redis</td>
<td>-</td>
</tr>
<tr>
<td><strong>éœ€è¦ AOP</strong></td>
<td>EasyCaching</td>
<td>-</td>
</tr>
<tr>
<td><strong>ä¼ä¸šçº§/é«˜å¯ç”¨</strong></td>
<td>FusionCache</td>
<td>NCache</td>
</tr>
</tbody>
</table>
<h3 id="æ ¸å¿ƒè¦ç‚¹">æ ¸å¿ƒè¦ç‚¹</h3>
<ol type="1">
<li><strong>å®˜æ–¹æ–¹æ¡ˆè¶‹åŠ¿</strong>ï¼šHybridCache æ˜¯å¾®è½¯çš„æœªæ¥æ–¹å‘ï¼Œ.NET 9+
é¡¹ç›®é¦–é€‰</li>
<li><strong>æˆç†Ÿç¨³å®š</strong>ï¼šFusionCache åŠŸèƒ½æœ€å®Œå–„ï¼Œç”Ÿäº§ç¯å¢ƒé¦–é€‰</li>
<li><strong>ç®€å•åœºæ™¯</strong>ï¼šLazyCache æˆ– IMemoryCache è¶³å¤Ÿ</li>
<li><strong>é¿å…è¿‡åº¦è®¾è®¡</strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ï¼Œä¸è¦ä¸ºäº†â€å®Œå–„â€è€Œå¼•å…¥å¤æ‚æ€§</li>
</ol>
<h3 id="å‚è€ƒèµ„æº">å‚è€ƒèµ„æº</h3>
<ul>
<li><a
href="https://learn.microsoft.com/en-us/aspnet/core/performance/caching">Microsoft
Caching Documentation</a></li>
<li><a
href="https://learn.microsoft.com/en-us/aspnet/core/performance/caching/hybrid">HybridCache
in .NET 9</a></li>
<li><a href="https://github.com/ZiggyCreatures/FusionCache">FusionCache
GitHub</a></li>
<li><a href="https://github.com/dotnetcore/EasyCaching">EasyCaching
GitHub</a></li>
<li><a href="https://github.com/alastairtree/LazyCache">LazyCache
GitHub</a></li>
</ul>

                </article>
            </div>
        </section>

        <!-- å³ä¾§çƒ­é—¨æ–‡ç«  -->
        <aside class="popular-sidebar">
            <div class="popular-header">
                <h3>çƒ­é—¨æ–‡ç« </h3>
            </div>
            <div class="popular-list" id="popular-list">
                <!-- åŠ¨æ€ç”Ÿæˆçš„çƒ­é—¨æ–‡ç« åˆ—è¡¨ -->
            </div>
        </aside>
    </main>

    <!-- JavaScript -->
    <script type="module" src="/script.js?v=2.2.0"></script>
    
    <!-- Initialize Highlight.js -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Highlight all code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        });
    </script>
</body>
</html>